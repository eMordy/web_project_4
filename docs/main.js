!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:n,about:r})}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._checkResponse(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:n})}).then((function(e){return t._checkResponse(e)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._button=this._formElement.querySelector(this._submitButtonSelector)}var t,r;return t=e,(r=[{key:"_showErrorMessage",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorClass)}},{key:"_hideErrorMessage",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent=" ",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideErrorMessage(e):this._showErrorMessage(e,e.validationMessage)}},{key:"_isValid",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._isValid(this._inputList)?(this._button.classList.add(this._inactiveButtonClass),this._button.disabled=!0):(this._button.classList.remove(this._inactiveButtonClass),this._button.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideErrorMessage(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handleCardClick,i=t.handleDeleteClick,u=t.handleAddLike,a=t.handleRemoveLike,s=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=r.link,this._name=r.name,this._id=r._id,this._ownerId=r.owner._id,this._userId=s,this._likes=r.likes,this._templateSelector=n,this._handleCardClick=o,this._handleDeleteClick=i,this._handleAddLike=u,this._handleRemoveLike=a,this._element=this._getTemplate(),this._image=this._element.querySelector(".grid__pic"),this._likesCounter=this._element.querySelector(".grid__likes-count"),this._likeButton=this._element.querySelector(".grid__heart")}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".grid__card").cloneNode(!0)}},{key:"_isImageLiked",value:function(){var e=this;this._likes.some((function(t){return t._id===e._userId}))?this._likeButton.classList.add("grid__heart_active"):this._likeButton.classList.remove("grid__heart_active")}},{key:"_likeCount",value:function(){this._likesCounter.textContent=this._likes.length}},{key:"_activeLike",value:function(){this._likeButton.classList.add("grid__heart_active"),this._likesCounter.textContent=this._likes.length+1}},{key:"_inactiveLike",value:function(){this._likeButton.classList.remove("grid__heart_active"),this._likesCounter.textContent=this._likes.length-1}},{key:"updateLikes",value:function(e){this._likes=e}},{key:"showDeleteButton",value:function(){this._ownerId!==this._userId&&this._element.querySelector(".grid__delete").remove()}},{key:"deleteImage",value:function(){this._element.querySelector(".grid__delete").closest(".grid__card").remove()}},{key:"generateCard",value:function(){return this._setEventListeners(),this._element.querySelector(".grid__name").textContent=this._name,this._image.src=this._link,this._image.alt=this._name,this.showDeleteButton(),this._likeCount(),this._isImageLiked(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likes.some((function(t){return t._id===e._userId}))?(e._handleRemoveLike(e),e._inactiveLike(e)):(e._handleAddLike(e),e._activeLike(e))})),this._element.querySelector(".grid__delete").addEventListener("click",(function(){return e._handleDeleteClick(e)})),this._image.addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})}))}}])&&o(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItems",value:function(e){this._container.prepend(e)}},{key:"appendItems",value:function(e){this._container.append(e)}}])&&u(t.prototype,n),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_closed"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_closed"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup_closed")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&s(t.prototype,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popupElement.querySelector(".popup__image"),t._popupTitle=t._popupElement.querySelector(".popup__image-title"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._image.src=n,this._image.alt=t,this._popupTitle.textContent=t,p(d(u.prototype),"open",this).call(this)}}])&&f(t.prototype,n),u}(c);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._form=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._submitButton=t._popupElement.querySelector(".popup__submit"),t._buttonText=t._popupElement.querySelector(".popup__submit").textContent,t._inputList=t._popupElement.querySelectorAll(".popup__input"),t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){b(S(u.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Saving...":this._buttonText}},{key:"setEventListeners",value:function(){var e=this;b(S(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues()),e.close()}))}}])&&v(t.prototype,n),u}(c);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.nameSelector,r=t.workSelector,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=n,this._workElement=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._nameElement.textContent,work:this._workElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.work;this._nameElement.textContent=t,this._workElement.textContent=n}},{key:"changeAvatar",value:function(e){var t=e.link;this._avatar.src=t}}])&&w(t.prototype,n),e}(),C=(document.querySelectorAll(".popup"),document.querySelector(".popup_type_add-card")),O=document.querySelector(".popup_type_edit-profile"),q=document.querySelector(".popup_type-image"),I=document.querySelector(".profile__edit"),R=document.querySelector(".profile__add"),j=(O.querySelector(".popup__close"),C.querySelector(".popup__close"),C.querySelector(".popup__submit"),document.querySelector(".popup__submit"),document.querySelector(".popup__submit_add-card"),document.querySelector(".profile__info-name")),P=document.querySelector(".profile__about-me"),B=document.querySelector(".popup__form_type_add"),T=document.querySelector(".popup__form_type_edit"),x=document.querySelector(".popup__input_type_name"),U=document.querySelector(".popup__input_type-about"),A=(C.querySelector(".popup__input_type_title"),C.querySelector(".popup__input_type-url"),document.querySelector(".grid")),D=(q.querySelector(".popup__image"),q.querySelector(".popup__image-title"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disable",inputErrorClass:"popup__input_error",errorClass:"popup__error_visible"});function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return(M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(r);if(o){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return J(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._handleFormSubmit=r,t._confirmDeleteButton=t._popupElement.querySelector(".popup__submit_type_delete"),t._buttonText=t._popupElement.querySelector(".popup__submit").textContent,t}return t=u,(n=[{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){this._confirmDeleteButton.textContent=e?"Deleting...":this._buttonText}},{key:"setEventListeners",value:function(){var e=this;M(H(u.prototype),"setEventListeners",this).call(this),this._confirmDeleteButton.addEventListener("click",(function(t){t.preventDefault(),e._handleFormSubmit(),e.renderLoading(!0)}))}}])&&F(t.prototype,n),u}(c);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new r(D,T),K=new r(D,B),Q=new r(D,".popup__form_type_avatar");G.enableValidation(),K.enableValidation(),Q.enableValidation();var W=new t({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d0e977b7-e6ef-4c48-940d-30398c6b7f34","Content-Type":"application/json"}}),X=new L({nameSelector:j,workSelector:P,avatar:".profile__picture"});function Y(e){var t=new i({data:e,handleCardClick:function(e){var t=e.name,n=e.link;ee.open({name:t,link:n})},handleDeleteClick:function(e){Z.open(),Z.setSubmitAction((function(){W.removeCard(e._id).then((function(){t.deleteImage(),Z.close()})).catch((function(e){console.log(e)}))}))},handleAddLike:function(e){W.addLike(e._id).then((function(e){t.updateLikes(e.likes)})).catch((function(e){console.log(e)}))},handleRemoveLike:function(e){W.removeLike(e._id).then((function(e){t.updateLikes(e.likes)})).catch((function(e){console.log(e)}))},userId:X.userId},"#card-template");return t.generateCard()}Promise.all([W.getUserInfo(),W.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];console.log(o),console.log(i),X.setUserInfo({name:o.name,work:o.about}),X.changeAvatar({link:o.avatar}),X.userId=o._id;var u=new a({items:i,renderer:function(e){var t=Y(e);u.addItems(t)}},A);u.renderItems();var s=new E({popupSelector:O,handleFormSubmit:function(e){W.setUserInfo({name:e.username,about:e.work}).then((function(){X.setUserInfo({username:e.username,work:e.work}),s.close()})).catch((function(e){console.log(e)})).finally((function(){s.renderLoading(!1)}))}});s.setEventListeners();var c=new E({popupSelector:C,handleFormSubmit:function(e){W.addCard(e).then((function(e){console.log(e);var t=Y(e);u.addItems(t),c.close()})).catch((function(e){console.log(e)})).finally((function(){c.renderLoading(!1)}))}});c.setEventListeners(),R.addEventListener("click",(function(){c.open(),K.resetValidation()}))})).catch((function(e){console.log(e)})),I.addEventListener("click",(function(){var e=X.getUserInfo();x.value=e.username,U.value=e.work,editFormPopup.open(),G.resetValidation()}));var Z=new z({popupSelector:".popup_type_delete"});Z.setEventListeners();var ee=new y(q);ee.setEventListeners();var te=new E({popupSelector:".popup_type_avatar",handleFormSubmit:function(e){W.setUserAvatar({avatar:e.link}).then((function(){X.changeAvatar(e),te.close()})).catch((function(e){console.log(e)})).finally((function(){te.renderLoading(!1)}))}});te.setEventListeners(),".profile__picture-overlay".addEventListener("click",(function(){te.open(),Q.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwibmFtZSIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJsaW5rIiwiY2FyZElkIiwiYXZhdGFyIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b24iLCJxdWVyeVNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUVycm9yTWVzc2FnZSIsIl9zaG93RXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiX2lzVmFsaWQiLCJkaXNhYmxlZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsInVzZXJJZCIsIl9saW5rIiwiX25hbWUiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJJZCIsIl9saWtlcyIsImxpa2VzIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUFkZExpa2UiLCJfaGFuZGxlUmVtb3ZlTGlrZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2xpa2VzQ291bnRlciIsIl9saWtlQnV0dG9uIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwibGlrZSIsImxlbmd0aCIsImNsb3Nlc3QiLCJzcmMiLCJhbHQiLCJzaG93RGVsZXRlQnV0dG9uIiwiX2xpa2VDb3VudCIsIl9pc0ltYWdlTGlrZWQiLCJfaW5hY3RpdmVMaWtlIiwiX2FjdGl2ZUxpa2UiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnV0dG9uIiwiX2J1dHRvblRleHQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImlzTG9hZGluZyIsInJlbmRlckxvYWRpbmciLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsIndvcmtTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl93b3JrRWxlbWVudCIsIl9hdmF0YXIiLCJ1c2VyTmFtZSIsIndvcmsiLCJ1c2VybmFtZSIsImFkZENhcmRNb2RhbFdpbmRvdyIsImVkaXRQcm9maWxlTW9kYWxXaW5kb3ciLCJpbWFnZU1vZGFsV2luZG93Iiwic2hvd0J1dHRvbiIsImFkZEJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwiYWRkQ2FyZEZvcm0iLCJlZGl0Rm9ybSIsIm5hbWVJbnB1dCIsIndvcmtJbnB1dCIsImxpc3QiLCJmb3JtU2VsZWN0b3IiLCJQb3B1cFdpdGhTdWJtaXQiLCJfY29uZmlybURlbGV0ZUJ1dHRvbiIsImFjdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJpbWFnZVBvcHVwIiwib3BlbiIsImRlbGV0ZVBvcHVwSW1nIiwic2V0U3VibWl0QWN0aW9uIiwicmVtb3ZlQ2FyZCIsImRlbGV0ZUltYWdlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYWRkTGlrZSIsInVwZGF0ZUxpa2VzIiwicmVtb3ZlTGlrZSIsImdlbmVyYXRlQ2FyZCIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwidXNlclZhbHVlcyIsImluaXRpYWxDYXJkcyIsInNldFVzZXJJbmZvIiwiY2hhbmdlQXZhdGFyIiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsImFkZEl0ZW1zIiwicmVuZGVySXRlbXMiLCJlZGl0Rm9ybVBvcHVwIiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXJzIiwiYWRkSW1hZ2VQb3B1cCIsImFkZENhcmQiLCJjYXJkRGF0YSIsInJlc2V0VmFsaWRhdGlvbiIsInVzZXJEYXRhIiwicHJvZmlsZUltZ1BvcHVwIiwic2V0VXNlckF2YXRhciJdLCJtYXBwaW5ncyI6Im1NQUFxQkEsRSxXQUNqQixjQUFrQyxJQUFwQkMsRUFBb0IsRUFBcEJBLFFBQVNDLEVBQVcsRUFBWEEsUyw0RkFBVyxTQUM5QkMsS0FBS0MsU0FBV0gsRUFDaEJFLEtBQUtFLFNBQVdILEUsbURBSXBCLFNBQWVJLEdBQ1gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBUixpQkFBeUJKLEVBQUlLLFcsNkJBR3hDLFdBQWtCLFdBQ2QsT0FBT0MsTUFB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QUFrTSxHQUNGdEIsUUFBUUMsSUFBSXFCLEdBQ1osSUFBTVIsRUFBY3hCLEVBQVdnQyxHQUMvQlQsRUFBU0UsU0FBU0QsR0FDbEJNLEVBQWNoRixXQUVqQjBELE9BQU0sU0FBQ0MsR0FDSkMsUUFBUUMsSUFBSUYsTUFFZm1CLFNBQVEsV0FDTEUsRUFBY2hFLGVBQWMsU0FJNUNnRSxFQUFjRCxvQkFFZGhELG1CQUEyQixTQUFTLFdBQ2hDaUQsRUFBYzNCLE9BQ2RULEVBQWlCdUMsd0JBR3hCekIsT0FBTSxTQUFDQyxHQUNKQyxRQUFRQyxJQUFJRixNQUlwQjdCLEVBQVc1RixpQkFBaUIsU0FBUyxXQUNqQyxJQUFNa0osRUFBV25DLEVBQVNrQixjQUMxQi9CLFFBQWtCZ0QsRUFBUzFELFNBQzNCVyxRQUFrQitDLEVBQVMzRCxLQUMzQm9ELGNBQWN4QixPQUNkVixFQUFrQndDLHFCQWlEdEIsSUFBTTdCLEVBQWlCLElBQUlkLEVBQWdCLENBQ3ZDOUMsY0ZoSTBCLHVCRWtJOUI0RCxFQUFleUIsb0JBR2YsSUFBTTNCLEdBQWEsSUFBSWpELEVBQWUwQixHQUN0Q3VCLEdBQVcyQixvQkFHWCxJQUFNTSxHQUFrQixJQUFJaEYsRUFBYyxDQUN0Q1gsY0Y3SXVCLHFCRThJdkJZLGlCQUFrQixTQUFDN0QsR0FDZnNHLEVBQUl1QyxjQUFjLENBQUU1TCxPQUFRK0MsRUFBS2pELE9BQzVCUixNQUFLLFdBQ0ZpSyxFQUFTdUIsYUFBYS9ILEdBQ3RCNEksR0FBZ0JyRixXQUVuQjBELE9BQU0sU0FBQ0MsR0FDSkMsUUFBUUMsSUFBSUYsTUFFZm1CLFNBQVEsV0FDTE8sR0FBZ0JyRSxlQUFjLFNBSTlDcUUsR0FBZ0JOLG9CRnhKbUIsNEJFMEpmN0ksaUJBQWlCLFNBQVMsV0FDMUNtSixHQUFnQmhDLE9BQ2hCUixFQUFvQnNDLHFCIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcblxyXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMnLCB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lJywge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGFib3V0XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH07XHJcblxyXG4gICAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvJyArIGNhcmRJZCwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzL2xpa2VzLycgKyBjYXJkSWQsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgY2FyZElkLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lL2F2YXRhcicsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBhdmF0YXJcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuLy8gY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbi8vICAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuLy8gICAgIGhlYWRlcnM6IHtcclxuLy8gICAgICAgICBhdXRob3JpemF0aW9uOiBcImQwZTk3N2I3LWU2ZWYtNGM0OC05NDBkLTMwMzk4YzZiN2YzNFwiLFxyXG4vLyAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbi8vICAgICB9ICAgICAgXHJcbi8vIH0pOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICAvLyB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZm9ybUVsZW1lbnQpXHJcbiAgICAgICAgLy8gdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgLy8gdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9ybUVsZW1lbnQpXHJcblxyXG4gICAgfSAqL1xyXG4gICAgX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9pc1ZhbGlkKGlucHV0TGlzdCkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAvLyAgICAgaWYgKHRoaXMuX2lzVmFsaWQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgLy8gICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIC8vICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIC8vICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuICAgIC8qIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1ZhbGlkKHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0RWxlbWVudClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVBZGRMaWtlLCBoYW5kbGVSZW1vdmVMaWtlLCB1c2VySWQgfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX3BpY1wiKTtcclxuICAgICAgICB0aGlzLl9saWtlc0NvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZF9fbGlrZXMtY291bnRcIik7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19oZWFydFwiKTtcclxuXHJcbiAgICB9XHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmdyaWRfX2NhcmRcIilcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9pc0ltYWdlTGlrZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJncmlkX19oZWFydF9hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZ3JpZF9faGVhcnRfYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9saWtlQ291bnQoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIF9hY3RpdmVMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImdyaWRfX2hlYXJ0X2FjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGggKyAxO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfaW5hY3RpdmVMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImdyaWRfX2hlYXJ0X2FjdGl2ZVwiKTtcclxuICAgICAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpa2VzKGxpa2VzKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBkZWxldGUgYnV0dG9uIFxyXG4gICAgc2hvd0RlbGV0ZUJ1dHRvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19kZWxldGVcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vZGVsZXRlIGltZ2VcclxuICAgIGRlbGV0ZUltYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19kZWxldGVcIik7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmNsb3Nlc3QoXCIuZ3JpZF9fY2FyZFwiKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ3JpZF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuc2hvd0RlbGV0ZUJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VDb3VudCgpO1xyXG4gICAgICAgIHRoaXMuX2lzSW1hZ2VMaWtlZCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luYWN0aXZlTGlrZSh0aGlzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUFkZExpa2UodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVMaWtlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkX19kZWxldGVcIilcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLl9pbWFnZVxyXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICAvLyB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgfVxyXG4gICAgYWRkSXRlbXMoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgYXBwZW5kSXRlbXMoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2cocG9wdXBTZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfY2xvc2VkXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSlcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2Nsb3NlZFwiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpXHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9jbG9zZWRcIikgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIC8vIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcblxyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXRcIik7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uVGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXRcIikudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCB3b3JrU2VsZWN0b3IsIGF2YXRhciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBuYW1lU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fd29ya0VsZW1lbnQgPSB3b3JrU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHVzZXJOYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgd29yazogdGhpcy5fd29ya0VsZW1lbnQudGV4dENvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgdXNlcm5hbWUsIHdvcmsgfSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcclxuICAgICAgICB0aGlzLl93b3JrRWxlbWVudC50ZXh0Q29udGVudCA9IHdvcms7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VBdmF0YXIoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbGluayB9ID0gZGF0YTtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gbGluaztcclxuICAgIH1cclxufSIsImV4cG9ydCBjb25zdCBwb3B1cFNldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbi8vd3JhcHBlcnMgXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZU1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlTW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGUtaW1hZ2VcIik7XHJcblxyXG5leHBvcnQgY29uc3Qgc2hvd0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTsgLy9vcGVuIGVkaXQgXHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZFwiKTsgLy8gYmlnIHBsdXMgYnRuIFxyXG5leHBvcnQgY29uc3QgY2xvc2VCdXR0b24gPSBlZGl0UHJvZmlsZU1vZGFsV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpOyAvL2Nsb3NlIGVkaXQgXHJcbmV4cG9ydCBjb25zdCBjbG9zZUFkZENhcmRCdXR0b24gPSBhZGRDYXJkTW9kYWxXaW5kb3cucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7IC8vIGNsb3NlIGFkZCBcclxuZXhwb3J0IGNvbnN0IGFkZFN1Ym1pdEJ1dHRvbiA9IGFkZENhcmRNb2RhbFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXRcIik7XHJcbmV4cG9ydCBjb25zdCB0ZXN0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0XCIpO1xyXG5leHBvcnQgY29uc3Qgc3ViQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0X2FkZC1jYXJkXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbmZvLW5hbWVcIik7IC8vdGl0bGUgbmFtZSBcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXQtbWVcIik7IC8vdGl0bGUgZGVzIFxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTsgLy9pbnB1dCBcclxuZXhwb3J0IGNvbnN0IHdvcmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGUtYWJvdXRcIik7IC8vaW5wdXQgXHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0ID0gYWRkQ2FyZE1vZGFsV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBsaW5rSW5wdXQgPSBhZGRDYXJkTW9kYWxXaW5kb3cucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW5wdXRfdHlwZS11cmxcIik7XHJcbmV4cG9ydCBjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncmlkXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGltYWdlTW9kYWxXaW5kb3cucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlVGl0bGUgPSBpbWFnZU1vZGFsV2luZG93LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBcIi5wb3B1cF90eXBlX2F2YXRhclwiO1xyXG5leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IFwiLnBvcHVwX19mb3JtX3R5cGVfYXZhdGFyXCI7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGljID0gXCIucHJvZmlsZV9fcGljdHVyZVwiO1xyXG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVJbWcgPSBcIi5wb3B1cF90eXBlX2RlbGV0ZVwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUltYWdlT3ZlcmxheSA9IFwiLnByb2ZpbGVfX3BpY3R1cmUtb3ZlcmxheVwiO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyAvL2NhcmRzIFxyXG4vLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW3tcclxuLy8gICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuLy8gICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuLy8gICAgIH0sXHJcbi8vIF07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0XCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXRfZGlzYWJsZVwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF9lcnJvclwiLCAvL25lZWQgdG8gdHVybiByZWRcclxuICAgIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdF90eXBlX2RlbGV0ZVwiKTtcclxuICAgICAgICB0aGlzLl9idXR0b25UZXh0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdFwiKS50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fY29uZmlybURlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fYnV0dG9uVGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9jb25maXJtRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGlcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvclwiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7IHNldHRpbmdzLCBzaG93QnV0dG9uLCBlZGl0Rm9ybSwgYWRkQnV0dG9uLCBhZGRDYXJkRm9ybSwgbmFtZUlucHV0LCB3b3JrSW5wdXQsIHByb2ZpbGVOYW1lLCBwcm9maWxlQWJvdXQsIGVkaXRQcm9maWxlTW9kYWxXaW5kb3csIGFkZENhcmRNb2RhbFdpbmRvdywgaW1hZ2VNb2RhbFdpbmRvdywgY2FyZFRlbXBsYXRlLCBsaXN0LCBwb3B1cEF2YXRhciwgcHJvZmlsZVBpYywgZm9ybUF2YXRhciwgcG9wdXBEZWxldGVJbWcsIHByb2ZpbGVJbWFnZU92ZXJsYXkgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCJcclxuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXRcIjtcclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZWRpdEZvcm0pO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRGb3JtKTtcclxuY29uc3QgZWRpdEF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtQXZhdGFyKTtcclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJkMGU5NzdiNy1lNmVmLTRjNDgtOTQwZC0zMDM5OGM2YjdmMzRcIixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vdXNlciBpbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIG5hbWVTZWxlY3RvcjogcHJvZmlsZU5hbWUsXHJcbiAgICB3b3JrU2VsZWN0b3I6IHByb2ZpbGVBYm91dCxcclxuICAgIGF2YXRhcjogcHJvZmlsZVBpY1xyXG59KTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgY29uc3QgW3VzZXJWYWx1ZXMsIGluaXRpYWxDYXJkc10gPSByZXM7XHJcbiAgICAgICAgY29uc29sZS5sb2codXNlclZhbHVlcyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coaW5pdGlhbENhcmRzKTtcclxuXHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyVmFsdWVzLm5hbWUsIHdvcms6IHVzZXJWYWx1ZXMuYWJvdXQgfSk7XHJcbiAgICAgICAgdXNlckluZm8uY2hhbmdlQXZhdGFyKHsgbGluazogdXNlclZhbHVlcy5hdmF0YXIgfSlcclxuICAgICAgICB1c2VySW5mby51c2VySWQgPSB1c2VyVmFsdWVzLl9pZDtcclxuXHJcbiAgICAgICAgY29uc3QgY2FyZExpc3QgPSBuZXcgU2VjdGlvbih7XHJcbiAgICAgICAgICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW1zKGNhcmRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGlzdCk7XHJcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuICAgICAgICAvL2VkaXQgZm9ybSBcclxuICAgICAgICBjb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgICAgICAgICBwb3B1cFNlbGVjdG9yOiBlZGl0UHJvZmlsZU1vZGFsV2luZG93LFxyXG4gICAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLnNldFVzZXJJbmZvKHsgbmFtZTogZGF0YS51c2VybmFtZSwgYWJvdXQ6IGRhdGEud29yayB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyB1c2VybmFtZTogZGF0YS51c2VybmFtZSwgd29yazogZGF0YS53b3JrIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0Rm9ybVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBlZGl0Rm9ybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZEltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICAgICAgICAgIHBvcHVwU2VsZWN0b3I6IGFkZENhcmRNb2RhbFdpbmRvdyxcclxuICAgICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRDYXJkKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZERhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW1zKGNhcmRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW1hZ2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSW1hZ2VQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWRkSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgYWRkSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbiAgICAgICAgICAgIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxuXHJcblxyXG5zaG93QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICBuYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS51c2VybmFtZTtcclxuICAgIHdvcmtJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLndvcms7XHJcbiAgICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcclxuICAgIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICh7XHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVBvcHVwSW1nLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZVBvcHVwSW1nLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpLnJlbW92ZUNhcmQoZGF0YS5faWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5kZWxldGVJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlUG9wdXBJbWcuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFuZGxlQWRkTGlrZTogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwaS5hZGRMaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGFuZGxlUmVtb3ZlTGlrZTogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGFwaS5yZW1vdmVMaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXNlcklkOiB1c2VySW5mby51c2VySWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjYXJkVGVtcGxhdGUpO1xyXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbn1cclxuXHJcbmNvbnN0IGRlbGV0ZVBvcHVwSW1nID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cERlbGV0ZUltZ1xyXG59KTtcclxuZGVsZXRlUG9wdXBJbWcuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vaW1nIHBvcHVwXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VNb2RhbFdpbmRvdyk7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGNoYW5nZSBwcm9maWxlIGltYWdlIGFuZCBzYXZlIFxyXG5jb25zdCBwcm9maWxlSW1nUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cFNlbGVjdG9yOiBwb3B1cEF2YXRhcixcclxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXBpLnNldFVzZXJBdmF0YXIoeyBhdmF0YXI6IGRhdGEubGluayB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5jaGFuZ2VBdmF0YXIoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlSW1nUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2ZpbGVJbWdQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxufSlcclxucHJvZmlsZUltZ1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5wcm9maWxlSW1hZ2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBwcm9maWxlSW1nUG9wdXAub3BlbigpO1xyXG4gICAgZWRpdEF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7Il0sInNvdXJjZVJvb3QiOiIifQ==